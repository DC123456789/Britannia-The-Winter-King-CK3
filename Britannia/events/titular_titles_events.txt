namespace = titular_titles_test


# Revert all de jure changes (aka apply Briton setup)
titular_titles_test.0001 = {
	hidden = yes

	immediate = {
		every_in_global_list = {
			variable = norse_duchy_list
			remove_variable = title_created_de_jure
		}
		every_in_global_list = {
			variable = anglo_saxon_duchy_list
			remove_variable = title_created_de_jure
		}
		every_in_global_list = {
			variable = roman_duchy_list
			remove_variable = roman_title_created_de_jure
		}
		
		every_county = {
			check_de_jure_liege_county_effect = yes
		}
		every_duchy = {
			check_de_jure_liege_duchy_effect = yes
		}
	}
}

# Apply full Anglo-Saxon de jure setup
titular_titles_test.1001 = {
	hidden = yes
	
	immediate = {
		every_in_global_list = {
			variable = norse_duchy_list
			remove_variable = title_created_de_jure
		}
		every_in_global_list = {
			variable = anglo_saxon_duchy_list
			set_variable = title_created_de_jure
		}
		every_county = {
			check_de_jure_liege_county_effect = yes
		}
		every_duchy = {
			check_de_jure_liege_duchy_effect = yes
		}
	}
}

# Apply Anglo-Saxon de jure setup in Aengland only
titular_titles_test.1002 = {
	hidden = yes

	immediate = {
		every_in_global_list = {
			variable = norse_duchy_list
			if = {
				limit = {
					NOT = { title_capital_county = { title_province = { geographical_region = world_britannia_wales } } }
				}
				remove_variable = title_created_de_jure
			}
		}
		every_in_global_list = {
			variable = anglo_saxon_duchy_list
			if = {
				limit = { 
					NOT = { target_is_de_jure_liege_or_above = title:k_wales }
					NOR = {
						this = title:d_stirlingshire
						this = title:d_anglelennox
						# this = title:d_lanarkshire
						# this = title:d_ayrshire
					}
				}
				set_variable = title_created_de_jure
			}
		}
		every_county = {
			check_de_jure_liege_county_effect = yes
		}
		every_duchy = {
			check_de_jure_liege_duchy_effect = yes
		}
	}
}

# Toggle Anglia/Sussex formation status
titular_titles_test.1003 = {
	hidden = yes

	immediate = {
		if = {
			limit = { title:k_anglia = { NOT = { has_variable = title_created_de_jure } } }
			title:k_anglia = { 
				set_variable = title_created_de_jure
				set_variable = title_expanded_de_jure
			}
			title:k_sussex = { 
				set_variable = title_expanded_de_jure
			}
		}
		else = {
			title:k_anglia = { 
				remove_variable = title_created_de_jure
				remove_variable = title_expanded_de_jure
			}
			title:k_sussex = { 
				remove_variable = title_expanded_de_jure
			}
		}
	
		every_county = {
			check_de_jure_liege_county_effect = yes
		}
		every_duchy = {
			check_de_jure_liege_duchy_effect = yes
		}
	}
}

# Apply full Roman de jure setup
titular_titles_test.2001 = {
	hidden = yes

	immediate = {
		every_in_global_list = {
			variable = norse_duchy_list
			remove_variable = title_created_de_jure
		}
		every_in_global_list = {
			variable = anglo_saxon_duchy_list
			remove_variable = title_created_de_jure
		}
		every_in_global_list = {
			variable = roman_duchy_list
			set_variable = roman_title_created_de_jure
		}
		
		every_county = {
			check_de_jure_liege_county_effect = yes
		}
		every_duchy = {
			check_de_jure_liege_duchy_effect = yes
		}
	}
}

# Apply Roman de jure setup within historical borders only
titular_titles_test.2002 = {
	hidden = yes

	immediate = {
		every_in_global_list = {
			variable = norse_duchy_list
			remove_variable = title_created_de_jure
		}
		every_in_global_list = {
			variable = anglo_saxon_duchy_list
			remove_variable = title_created_de_jure
		}
		every_in_global_list = {
			variable = roman_duchy_list
			if = {
				limit = { NOT = { this.var:roman_kingdom = title:k_valentia } }
				set_variable = roman_title_created_de_jure
			}
		}
		
		every_county = {
			check_de_jure_liege_county_effect = yes
		}
		every_duchy = {
			check_de_jure_liege_duchy_effect = yes
		}
	}
}