#On actions related to religion

# Code on-action: character converts faith. Only fired when using the convert window, or the script effect that uses the same logic
# Root is the converted character
# scope:old_faith is the faith they used to have
# scope:actor is the character instigating the conversion
on_faith_conversion = {
	on_actions = {
		BTWK_on_character_faith_change_all
	}
}

# Code on-action: character changes faith. Not called when a character gets a faith on birth, creation, and similar
# Root is the character
# scope:old_faith is the faith they used to have
on_character_faith_change = {
	on_actions = {
		BTWK_on_character_faith_change_all
	}
}

BTWK_on_character_faith_change_all = {
	events = {
		spreading_of_christianity.0100		# First Anglo-Saxon Christian King
	}
	effect = {
		# Remove SOC modifiers
		if = {
			limit = { religion = religion:christianity_religion }
			remove_character_modifier = BTWK_soc_encouraging_missionaries_modifier
			remove_character_modifier = BTWK_soc_banning_missionaries_modifier
		}
		else = {
			remove_character_modifier = BTWK_soc_sponsoring_internal_missionaries_modifier
			remove_character_modifier = BTWK_soc_sponsoring_external_missionaries_modifier
		}
	}
}
