#########################################################################
# Romanized Generic Title Decisions										#
#########################################################################

found_romanized_germanic_kingdom_britannia_decision = {
	picture = {
		reference = "gfx/interface/illustrations/decisions/decision_realm.dds"
	}
	decision_group_type = major

	ai_check_interval = 1

	desc = found_romanized_germanic_kingdom_britannia_decision_desc

	is_shown = {
		culture = {
			has_variable = ancestral_non_roman_culture
			this.var:ancestral_non_roman_culture = {
				OR = {
					has_cultural_pillar = heritage_romanized_germanic
					has_cultural_pillar = heritage_iranian
				}
			}
			NOT = { has_variable = britannia_cultural_kingdom_title }
		}
		highest_held_title_tier < tier_empire
		any_held_title = {
			OR = {
				tier < root.highest_held_title_tier
				title_capital_county.title_province = { geographical_region = geographical_region:btwk_world_britannia }
			}
		}
	}

	is_valid = {
	}

	effect = {
		add_prestige = 400
		add_legitimacy = 50
		primary_title.title_capital_county.var:default_duchy.var:default_kingdom = { save_scope_as = capital_kingdom }
		save_scope_as = founder
		show_as_tooltip = {
			primary_title.title_capital_county = {
				if = {
					limit = { title_province = { geographical_region = geographical_region:btwk_world_britannia } }
					this.var:default_duchy.var:default_kingdom = {
						if = {
							limit = {
								NOT = { holder ?= scope:founder }
							}
							create_title_and_vassal_change = {
								type = usurped
								save_scope_as = title_change
								add_claim_on_loss = yes
							}
							change_title_holder = {
								holder = scope:founder
								change = scope:title_change
							}
							resolve_title_and_vassal_change = scope:title_change
						}
						# Variables don't play well with tooltips so we use scopes here
						set_title_name_w_tooltip_effect = { NEW_NAME = ROMANIZED_GERMANIC_BRITANNIA_KINGDOM_NAME_TOOLTIP }
					}
				}
				else = {
					custom_tooltip = {
						text = found_romanized_germanic_kingdom_britannia_decision_tt
					}
				}
			}
		}
		trigger_event = { id = titular_titles_romanized_germanic.0001 }
	}
	
	cost = {
		gold = { value = 200 }
		piety = { value = 100 }
	}
	
	ai_potential = {
		is_independent_ruler = yes
	}

	ai_will_do = {
		base = 100
	}
}
